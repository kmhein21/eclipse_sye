---
title: "Creating Data Frame of ACIs"
format: html
---

```{r}
library(purrr)
library(soundecology)
library(tidyverse)
library(here)
library(stringr)
paths <- list.files(here("wav_files"), pattern = "\\.WAV$",
                    full.names = TRUE)

wav_files <- map(paths, readWave)
AEI_allWAV<-map(wav_files, acoustic_evenness)

AEI_df<-as.data.frame(AEI_allWAV)|>
  select(1,3,5,7,9,11,13,15,17,19)|>
  pivot_longer(cols=c(1:10), names_to = "Name",
               values_to = "AEI")

paths_date <-str_remove(paths, "/Users/kaitlinheintzman/Desktop/Eclipse_SYE/wav_files/")

full_WAV_df<-cbind(paths_date, AEI_df)|>
  separate(col = paths_date, into = c("Date_time", "nonsense"), sep = -4)|>
  select(-2,-3)


```

```{r}
ACI_allWAV<-map(wav_files, acoustic_complexity)
n<-10
ACI_all<-vector("list", length(c(1:10)))
for (i in 1:n){
    ACI_all[i]<-(as.data.frame(ACI_allWAV[[i]]$aci_fl_left_vals))
  } 


ACI_df<-unnest(as.data.frame(ACI_all))

names<-c("ACI_1", "ACI_2","ACI_3", "ACI_4","ACI_5","ACI_6","ACI_7","ACI_8","ACI_9","ACI_10")
old_names<-colnames(ACI_df)

ACI_df<-ACI_df|> rename(cols = old_names)
ACI_df<-ACI_df|>rename("ACI_1" = cols1, "ACI_2" = cols2, "ACI_3" = cols3, "ACI_4" = cols4, "ACI_5" = cols5, "ACI_6" = cols6, "ACI_7" = cols7, "ACI_8" = cols8, "ACI_9" = cols9, "ACI_10" = cols10)

Val<-c(1:256)
ACI_df<-cbind(Val,ACI_df)

ACI_df<-ACI_df|>pivot_longer(cols = c(2:11), names_to = "WAV", values_to = "ACI")
```

```{r}
ggplot(data=ACI_df, aes(x=Val, y=ACI))+
  geom_line(col="orange")+
  theme_minimal()+
  labs(x = "Time(s)", y = "Acoustic Complexity")+
  facet_wrap(~WAV)
```

